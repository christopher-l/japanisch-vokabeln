\documentclass[11pt]{scrartcl}

\usepackage{xltxtra, setspace}
\usepackage{xeCJK}
\usepackage{hyperref}
\usepackage{xcolor}
\usepackage{multicol}
\usepackage{enumitem}
\usepackage{needspace}
\usepackage[ngerman]{babel}

\setCJKmainfont{Source Han Sans JP Normal}
\setCJKsansfont{Source Han Sans JP Normal}
\setmainfont{Source Sans Pro}

\usepackage[CJK,overlap]{ruby}
\renewcommand{\rubysep}{0ex}
\renewcommand{\rubysize}{0.5}
\setlength{\parindent}{0pt}

% Fix ruby spacing
\let\oldruby\ruby
\def\ruby#1#2{\oldruby{#1}{#2}\futurelet\next\addCJKglue}
\def\addCJKglue{\ifx\next\ruby \CJKglue \fi}

\setcounter{secnumdepth}{0}

\newif\ifenumerate
\makeatletter
\newcommand\vocab{\@ifstar{\enumeratetrue\vocab@}{\enumeratefalse\vocab@}}
\newcommand{\vocab@}[2]{
  \begin{minipage}{\columnwidth}
  \raggedright
  {\Large#1}
  \par
  #2
  \vspace{.8em}
  \end{minipage}}
\makeatother

\newcommand\type[1]{
  {\scriptsize#1}
  \vspace{-.3em}
}

\newcommand\form[1]{
  {\small\color{gray}#1}
}

\newcommand{\translation}[1]{
  \par
  \ifenumerate
  \begin{enumerate}[leftmargin=*,topsep=0em,resume]
    \itemsep0em \item #1
  \end{enumerate}
  \else
  \begin{itemize}[leftmargin=*,topsep=0em,label={},labelsep=0em]
    \itemsep0em \item #1
  \end{itemize}
  \fi}

\newcommand{\example}[2]{
  {\small #1}\\[-.3em]
  {\footnotesize #2}\\}

\newcommand{\comment}[1]{
  {\color{gray}(#1)}
}

\newenvironment{vocabs}[1][]
  {\Needspace{5\baselineskip}
   #1\begin{multicols}{3}}
  {\end{multicols}}

\begin{document}

% \raggedcolumns

\begin{vocabs}[\section{Substantive}]
\input{substantive}
\end{vocabs}

\begin{vocabs}[\subsection{KÃ¶rper}]
\input{koerper}
\end{vocabs}

\begin{vocabs}[\section{Zeitangaben}]
\input{zeitangaben}
\end{vocabs}

\begin{vocabs}[\subsection{Tierkreiszeichen}]
\input{tierkreiszeichen}
\end{vocabs}

\newpage
\section{Verben}
\begin{vocabs}
\input{verben}
\end{vocabs}

\end{document}
